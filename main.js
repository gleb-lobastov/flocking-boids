!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.animateFlockingBoids=t():e.animateFlockingBoids=t()}(this,(function(){return(()=>{"use strict";var e={11:(e,t)=>{function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.canvas,o=t.virtualCanvas,i=void 0===o?document.createElement("canvas"):o,a=t.animationScene;if(n(this,e),!r)throw new Error("Flocking Boids: option canvas is Requried");this.isRunning=!1,this.renderHandle=null,this.animationScene=a,this.canvas=r,this.virtualCanvas=i,this.virtualCanvas.width=2*this.canvas.width,this.virtualCanvas.height=2*this.canvas.height}var t,o;return t=e,(o=[{key:"play",value:function(){this.isRunning=!0,this.tick()}},{key:"pause",value:function(){window.cancelAnimationFrame(this.renderHandle),this.renderHandle=null,this.isRunning=!1}},{key:"tick",value:function(){this.animationScene.tick(),this.requestRender(),this.isRunning&&setTimeout(this.tick.bind(this),20)}},{key:"requestRender",value:function(){var e=this;this.renderHandle||(this.renderHandle=window.requestAnimationFrame((function(){e.render(),e.renderHandle=null})))}},{key:"render",value:function(){var e=this.virtualCanvas.getContext("2d");e.clearRect(0,0,this.virtualCanvas.width,this.virtualCanvas.height),e.fillStyle="black",this.animationScene.render(e);var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.drawImage(this.virtualCanvas,0,0,this.virtualCanvas.width,this.virtualCanvas.height,0,0,this.canvas.width,this.canvas.height)}}])&&r(t.prototype,o),e}();t.default=o},699:(e,t)=>{function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.animation=t,this.settings=n}var t,r;return t=e,(r=[{key:"play",value:function(){this.animation.play()}},{key:"pause",value:function(){this.animation.pause()}}])&&n(t.prototype,r),e}();t.default=r},937:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BOID_TYPES=void 0;var r=f(n(160)),o=f(n(678)),i=f(n(902)),a=f(n(649)),u=f(n(447)),c=f(n(111)),s=f(n(912));function f(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.BOID_TYPES={FLOCKING_BOIDS:"flockingBoids",PREDATORS:"predators"};var p=function(){function e(t){var n=t.mouse;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mouse=n,this.instances={flockingBoids:[],predators:[],manualPredator:null}}var t,n;return t=e,(n=[{key:"tick",value:function(){var e=this.instances.flockingBoids,t=this.instances.predators;this.resolveMousePredator(),this.populate("flockingBoids",i.default),this.populate("predators",o.default),(0,a.default)(e,t),(0,u.default)(t,e),(0,c.default)(t,s.default.characteristics.predators.speedRatio),(0,c.default)(e,s.default.characteristics.flockingBoids.speedRatio)}},{key:"resolveMousePredator",value:function(){var e;s.default.characteristics.manualPredator=(null===(e=this.mouse)||void 0===e?void 0:e.hasFocus)?{position:this.mouse.getPosition()}:null}},{key:"populate",value:function(e,t){var n=this.instances[e],o=s.default.characteristics[e],i=o.count-n.length;if(i){var a=o.spawnPattern,u=(a=void 0===a?{}:a).maxGrowthPerTick,c=void 0===u?1/0:u,f=a.maxShrinkPerTick,l=void 0===f?1/0:f,p=Math.max(-l,Math.min(i,c));if(p>0)for(var d=0;d<p;d+=1)n.push(new t(o));else{var y=n.length/p;(0,r.default)(n,(function(e,t){return t%y}))}}}},{key:"render",value:function(e){for(var t=this.instances,n=t.flockingBoids,r=t.predators,o=0;o<r.length;o+=1)r[o].render(e);for(var i=0;i<n.length;i+=1)n[i].render(e)}}])&&l(t.prototype,n),e}();t.default=p},900:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(337)),i=c(n(964)),a=n(37);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=t.spawnPattern;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"size",1),f(this,"color","#000"),this.spawn(n)}var t,n;return t=e,(n=[{key:"spawn",value:function(e){this.position=(0,a.spawnPosition)(e),this.speed=(0,a.spawnSpeed)(this.position,e)}},{key:"accelerate",value:function(e){this.speed=i.normalize(e.reduce((function(e,t){if(!t)return e;var n=t.force,r=t.strength;return i.add(e,i.multiply(o.normalize(n),r))}),this.speed))}},{key:"render",value:function(e){e.save(),e.translate(this.position.x*e.canvas.width,this.position.y*e.canvas.height),e.rotate(Math.PI/2-(Math.PI/2-Math.acos(this.speed.x))/1.5),e.fillStyle=this.color,e.beginPath(),e.moveTo(0,0),e.lineTo(-3*this.size,12*this.size),e.lineTo(3*this.size,0),e.lineTo(-3*this.size,-12*this.size),e.closePath(),e.fill(),e.restore()}}])&&s(t.prototype,n),e}();t.default=l},902:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(912)),o=u(n(337)),i=u(n(964));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,a=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=y(t);if(n){var o=y(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return d(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).resetFlockingForces(),t.carelessnessRatio=1+Math.random(),t}return l(u,null,[{key:"calcFlockingForces",value:function(e,t){for(var n=e.sort((function(e,t){return e.position.x-t.position.x})),o=Math.max(r.default.forces.alignment.distance,r.default.forces.avoidance.distance,r.default.forces.cohesion.distance),i=0,a=n.length,u=0;u<a;u+=1){var c=n[u];c.resetFlockingForces();for(var s=i;s<u;s+=1){var f=n[s];c.position.x-f.position.x<=o?c.accumulateFlockingForces(f):i+=1}for(var l=u+1;l<a;l+=1){var p=n[l];if(!(p.position.x-c.position.x<=o))break;c.accumulateFlockingForces(p)}t(n[u])}}}]),l(u,[{key:"resetFlockingForces",value:function(){this.flockingForces={avoidance:{x:0,y:0,z:0},alignment:{x:0,y:0,z:0},cohesion:{x:0,y:0,z:0}}}},{key:"accumulateFlockingForces",value:function(e){var t=r.default.forces,n=t.alignment.distance,a=t.avoidance.distance,u=t.cohesion.distance,c=o.squareDistance(this.position,e.position);c<a&&i.add(this.flockingForces.avoidance,i.multiply(o.subtract(this.position,e.position),function(e,t){return Math.pow(1-e/t,2)}(c,a))),c<n&&i.add(this.flockingForces.alignment,e.speed),c<u&&i.add(this.flockingForces.cohesion,o.subtract(e.position,this.position))}},{key:"resolveFlockingForceFactors",value:function(){return o.checkHasLength(this.flockingForces.avoidance)?[{force:this.flockingForces.avoidance,strength:r.default.forces.avoidance.strength}]:[{force:this.flockingForces.alignment,strength:r.default.forces.alignment.strength},{force:this.flockingForces.cohesion,strength:r.default.forces.cohesion.strength}]}}]),u}(c(n(900)).default);t.default=h},678:(e,t,n)=>{var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return u(this,e)});function o(){var e;i(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return f(c(e=r.call.apply(r,[this].concat(n))),"size",3),f(c(e),"color","#826264"),e}return o}(((r=n(900))&&r.__esModule?r:{default:r}).default);t.default=l},899:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r,o=e.carelessnessRatio||1,u=i.default.characteristics.manualPredator;return u?(t=e,n=u,r=i.default.forces.predatorAvoidance.distance/Math.pow(o,2),a.squareDistance(t.position,n.position)<r?{force:a.subtract(e.position,u.position),strength:i.default.forces.predatorAvoidance.strength/o}:null):null};var o,i=(o=n(912))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(n(337));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}},653:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=e.carelessnessRatio||1,r={x:0,y:0,z:0},o=i.default.forces.predatorAvoidance.distance/n,c=0;c<t.length;c+=1){var s=a.squareDistance(e.position,t[c].position);s<o&&u.add(r,u.multiply(a.subtract(e.position,t[c].position),f(s,o)))}return{force:r,strength:i.default.forces.predatorAvoidance.strength/n}};var o,i=(o=n(912))&&o.__esModule?o:{default:o},a=s(n(337)),u=s(n(964));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function f(e,t){return Math.pow(1-e/t,2)}},597:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=i.default.characteristics.roost.position,n=e.position;return a.squareDistance(n,t)>i.default.forces.roosting.distance?{force:{x:t.x-n.x,y:t.y-n.y,z:0},strength:i.default.forces.roosting.strength}:null};var o,i=(o=n(912))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(n(337));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}},649:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){r.default.calcFlockingForces(e,(function(e){var n;e.accelerate([].concat(function(e){if(Array.isArray(e))return c(e)}(n=e.resolveFlockingForceFactors())||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[(0,a.default)(e,t),(0,o.default)(e),(0,i.default)(e)]))}))};var r=u(n(902)),o=u(n(597)),i=u(n(899)),a=u(n(653));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},447:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0;n<e.length;n+=1){var r=c(e[n],t);e[n].accelerate([{force:a.subtract(t[r].position,e[n].position),strength:i.default.forces.predatorToPrey.strength}])}};var o,i=(o=n(912))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(n(337));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e,t){for(var n=1/0,r=0,o=0;o<t.length;o+=1){var i=a.squareDistance(e.position,t[o].position);i<n&&(n=i,r=o)}return r}},111:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0;n<e.length;n+=1)e[n].position.x=(e[n].position.x+t*e[n].speed.x+1)%1,e[n].position.y=(e[n].position.y+t*e[n].speed.y+1)%1}},912:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(37),o={forces:{alignment:{distance:.01,strength:.3},avoidance:{distance:1e-4,strength:.5},cohesion:{distance:.02,strength:.15},predatorAvoidance:{distance:.03,strength:2},roosting:{distance:.2,strength:.1},predatorToPrey:{strength:.1}},characteristics:{roost:{position:{x:.5,y:.5,z:0}},predators:{spawnPattern:{spotPattern:r.SPAWN_SPOT_PATTERNS.EDGE,speedPattern:r.SPAWN_SPEED_PATTERNS.TO_CENTER},count:1,speedRatio:.005},flockingBoids:{spawnPattern:{spotPattern:r.SPAWN_SPOT_PATTERNS.CIRCLE,spotVariance:.1,speedPattern:r.SPAWN_SPEED_PATTERNS.FROM_CENTER,speedRotation:45,maxShrinkPerTick:5,maxGrowthPerTick:100},count:1e3,speedRatio:.004},manualPredator:null}};t.default=o},160:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0,r=0;n<e.length;){var o=e[n];t(o,n,e)&&(e[r++]=o),n++}return e.length=r,e}},37:(e,t,n)=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.spawnPosition=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.spotPattern,r=void 0===n?a.RANDOM:n,o=t.spotVariance;switch(r){case a.CIRCLE:var i=t.circleRadius,u=void 0===i?.4:i,c=2*u*(Math.random()-.5),s=Math.sign(Math.random()-.5)*Math.sqrt(Math.pow(u,2)-Math.pow(c,2));e={x:c+.5+.05*(Math.random()-.5),y:s+.5+.05*(Math.random()-.5),z:0};break;case a.EDGE:e={x:Math.ceil(Math.random()-.5),y:Math.ceil(Math.random()-.5),z:0};break;case a.RANDOM:default:e={x:Math.random(),y:Math.random(),z:0}}return o&&(e.x+=(Math.random()-.5)*o,e.y+=(Math.random()-.5)*o),e.x=Math.abs(e.x%1),e.y=Math.abs(e.y%1),e},t.spawnSpeed=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.speedPattern,i=void 0===r?u.RANDOM:r,a=n.speedRotation;switch(i){case u.IDLE:return{x:0,y:0,z:0};case u.STRAIGHT:t={x:1,y:0,z:0};break;case u.TO_CENTER:t=o.normalize({x:.5-e.x,y:.5-e.y,z:0});break;case u.FROM_CENTER:t=o.normalize({x:e.x-.5,y:e.y-.5,z:0});break;case u.RANDOM:default:t=o.normalize({x:Math.random(),y:Math.random(),z:0})}return o.normalize(t),a&&o.rotate(t,a/180*Math.PI),t},t.SPAWN_SPEED_PATTERNS=t.SPAWN_SPOT_PATTERNS=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(n(964));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var a={RANDOM:"RANDOM",CIRCLE:"CIRCLE",EDGE:"EDGE"};t.SPAWN_SPOT_PATTERNS=a;var u={RANDOM:"RANDOM",IDLE:"IDLE",TO_CENTER:"TO_CENTER",FROM_CENTER:"FROM_CENTER",STRAIGHT:"STRAIGHT"};t.SPAWN_SPEED_PATTERNS=u},337:(e,t)=>{function n(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)+Math.pow(e.z,2))}Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=function(e){var t=n(e);return t>0?{x:e.x/t,y:e.y/t,z:e.z/t}:e},t.length=n,t.checkHasLength=function(e){var t=e.x,n=e.y,r=e.z;return t||n||r},t.squareDistance=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2)},t.multiply=function(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}},t.add=function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}},t.subtract=function(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}},t.rotate=function(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t),z:e.z}}},964:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=function(e){var t=(0,r.length)(e);return t>0&&(e.x/=t,e.y/=t,e.z/=t),e},t.multiply=function(e,t){return e.x*=t,e.y*=t,e.z*=t,e},t.add=function(e,t){return e.x+=t.x,e.y+=t.y,e.z+=t.z,e},t.subtract=function(e,t){return e.x-=t.x,e.y-=t.y,e.z-=t.z,e},t.rotate=function(e,t){var n=e.x*Math.cos(t)-e.y*Math.sin(t);return e.y=e.x*Math.sin(t)+e.y*Math.cos(t),e.x=n,e},Object.defineProperty(t,"length",{enumerable:!0,get:function(){return r.length}}),Object.defineProperty(t,"squareDistance",{enumerable:!0,get:function(){return r.squareDistance}}),Object.defineProperty(t,"checkHasLength",{enumerable:!0,get:function(){return r.checkHasLength}});var r=n(337)},352:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas,n=e.virtualCanvas,c=(0,u.default)(t),s=new i.default({mouse:c}),f=new r.default({canvas:t,virtualCanvas:n,animationScene:s});return new o.default(f,a.default)};var r=c(n(11)),o=c(n(699)),i=c(n(937)),a=c(n(912)),u=c(n(753));function c(e){return e&&e.__esModule?e:{default:e}}},753:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={x:0,y:0,hasFocus:!1,getPosition:function(){return{x:t.x/e.width,y:t.y/e.height,z:0}}};return e.addEventListener("mousemove",(function(e){t.hasFocus=!0,t.x=e.offsetX,t.y=e.offsetY})),e.addEventListener("mouseout",(function(){t.hasFocus=!1})),t}}},t={};return function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(352)})()}));